import{D}from"./vuedraggable.umd-aeebe76c.js";import v from"./Product-b1135243.js";import f from"./Images-b24e9d27.js";import y from"./Banner-6ce744ba.js";import k from"./index-2ace82b9.js";import{_ as N,r as w,o as n,c as d,b as o,F as b,j as C,W as P,t as g,n as V,e as E,w as B,N as h,i as _,k as T}from"./app-037f133e.js";import"./Info-84f45a9c.js";import"./Image-31c11cec.js";import"./Product-20432f87.js";const F={components:{EditForm:k,Draggable:D,Product:v,Images:f,Banner:y},data(){return{type:null,isPush:!1,index:null,props:{},isRight:!1,className:{1:"one",2:"two",3:"three"},typeList:{banner:{name:"轮播图",icon:"el-icon-picture",com:y},product:{name:"商品",icon:"el-icon-s-goods",com:v},images:{name:"图片",icon:"el-icon-picture",com:f}},view:[{type:"info",title:"页面标题"}]}},computed:{info(){return this.view[0]}},methods:{dragStart(s){this.type=s.target.dataset.type},dragEnd(s){this.$delete(this.view[this.index],"status"),this.isPush=!1,this.type=null},selectType(s){this.isRight=!1,this.props=this.view[s],this.$nextTick(()=>this.isRight=!0)},deleteItem(s,t){s.preventDefault(),s.stopPropagation(),this.view.splice(t,1),this.isRight=!1,this.props={}},drog(s){this.type&&(s.preventDefault(),s.stopPropagation(),this.dragEnd())},dragOver(s){if(!this.type)return;s.preventDefault(),s.stopPropagation();let m=s.target.className!=="view-content"?"item":"view-content";const l={type:this.type,status:2,data:[],options:{},tabType:1};if(m=="view-content")this.isPush||(this.index=this.view.length,this.isPush=!0,this.view.push(l));else if(m=="item"){let c=s.target,[p,e,a]=[s.offsetY,c.offsetHeight,c.dataset.index];console.log([p,e,a]);let u=p<e/2;if(!this.isPush)u?a==0?this.view.unshift(l):this.view.splice(a,0,l):(a=+a+1,this.view.splice(a,0,l));else{if(u)var i=a==0?0:a-1,r=this.view[i].status==2;else var i=+a+1,r=this.view.length>i&&this.view[i].status==2;if(r)return;const x=this.view.splice(this.index,1);this.view.splice(a,0,x[0])}this.index=a,this.isPush=!0}}}},R={class:"decoration-edit"},S={class:"l"},I=["data-type"],L={class:"c"},O=["src"],z={class:"tit"},j=["data-index"],H={key:0,class:"wait"},U={class:"r"};function W(s,t,m,l,i,r){const c=w("Draggable"),p=w("EditForm");return n(),d("section",R,[o("section",S,[o("ul",{onDragstart:t[0]||(t[0]=(...e)=>r.dragStart&&r.dragStart(...e)),onDragend:t[1]||(t[1]=(...e)=>r.dragEnd&&r.dragEnd(...e))},[(n(!0),d(b,null,C(i.typeList,(e,a,u)=>(n(),d("li",{draggable:"","data-type":a,key:u+1},[o("span",{class:P(e.icon)},null,2),o("p",null,g(e.name),1)],8,I))),128))],32)]),o("section",L,[o("div",{class:"top-nav",onClick:t[2]||(t[2]=e=>r.selectType(0))},[o("img",{src:s.$withBase("/topNavBlack.png")},null,8,O),o("span",z,g(r.info.title),1)]),o("div",{class:"view-content",onDrop:t[6]||(t[6]=(...e)=>r.drog&&r.drog(...e)),onDragover:t[7]||(t[7]=(...e)=>r.dragOver&&r.dragOver(...e)),style:V({backgroundColor:r.info.backgroundColor})},[E(c,{modelValue:i.view,"onUpdate:modelValue":t[5]||(t[5]=e=>i.view=e)},{item:B(({element:e})=>[i.index>0?(n(),d("div",{"data-index":i.index,key:i.index,class:"item",onClick:t[4]||(t[4]=a=>r.selectType(i.index))},[h(" waiting "),e.status&&e.status==2?(n(),d("div",H,g(e.type),1)):(n(),_(T(i.typeList[e.type].com),{key:1,data:e,className:i.className[e.tabType]},null,8,["data","className"])),o("i",{onClick:t[3]||(t[3]=a=>r.deleteItem(a,i.index)),class:"el-icon-error"})],8,j)):h("v-if",!0)]),_:1},8,["modelValue"])],36)]),o("section",U,[i.isRight?(n(),_(p,{key:0,data:i.props},null,8,["data"])):h("v-if",!0)])])}const Z=N(F,[["render",W],["__file","DragVue.vue"]]);export{Z as default};

import{D as B}from"./vuedraggable.umd-aeebe76c.js";import{_ as N,r as o,o as u,c as f,N as k,b as e,t as _,i as v,w as n,W as T,F as b,e as i,d as C,a_ as S,aY as U}from"./app-037f133e.js";const j={name:"Images",components:{Draggable:B},props:{data:{type:Object,default:()=>{}}},data(){return{list:{},url:"",index:null,show:!1,imageIndex:null}},computed:{size(){return this.list.type=="images"?"750*750":"750*400"},len(){return this.list.type=="images"?8:10}},mounted(){this.list=this.data},methods:{close(){this.show=!1,this.url=""},confirm(){this.list.data[this.index].link=this.url,this.close()},urlPopup(s){this.show=!0,this.index=s,this.url=link},removeImage(s){this.list.data.splice(s,1)},addImage(s){this.imageIndex=s,this.$refs.upload.$children[0].$refs.input.click()},upload(s){if(this.list.data.length>=this.len){this.$message.error(`最多添加${this.len}张图片!`);return}const d=s.file,a=[{text:"只能上传图片格式png、jpg、gif!",result:d.type.indexOf("image")!=-1},{text:"只能上传大小小于5M",result:d.size/1024/1024<5}];for(let p of a)if(!p.result){this.$message.error(p.text);return}const t=new FormData;t.append("file",d),t.append("clientType","multipart/form-data");const m=this.imageIndex,h={name:d.name,url:URL.createObjectURL(d),form:t};m!==null?this.$set(this.list.data,m,h):this.list.data.push(h)}}},I=s=>(S("data-v-6dd638b5"),s=s(),U(),s),F={class:"image-content"},L={class:"desc"},O={class:"l-info"},P={class:"sort"},q=I(()=>e("span",null,"名称：",-1)),R={class:"text"},E=I(()=>e("span",null,"链接：",-1)),M=["onClick"],W=["onClick"],Y={class:"r-image"},A=["onClick"],G={class:"image-box"},H=["src"],J=["onClick"],K={class:"size"};function Q(s,c,d,x,a,t){const m=o("el-tooltip"),h=o("Draggable"),p=o("el-button"),w=o("el-upload"),V=o("el-input"),y=o("el-form-item"),D=o("el-form"),z=o("el-dialog");return u(),f(b,null,[k(" Banner & Image 通用组件 "),e("div",F,[e("p",L,"添加图片 (最多"+_(t.len)+"张，可拖动排序）",1),a.list.data&&a.list.data.length>0?(u(),v(h,{key:0,modelValue:a.list.data,"onUpdate:modelValue":c[0]||(c[0]=l=>a.list.data=l),tag:"ul",draggable:"li",class:T(["image-list",{disable:d.data.tabType==2}])},{item:n(({element:l,index:r})=>[(u(),f("li",{key:r},[e("div",O,[e("p",null,[e("span",P,"排序"+_(r+1),1)]),e("p",null,[q,e("span",R,_(l&&l.name),1)]),e("p",null,[E,l.link?(u(),v(m,{key:0,effect:"dark",content:l.link,placement:"top"},{default:n(()=>[e("span",{class:"text",onClick:g=>t.urlPopup(r,l.link)},_(l.link),9,M)]),_:2},1032,["content"])):(u(),f("span",{key:1,onClick:g=>t.urlPopup(r),class:"link"},"请输入跳转链接",8,W))])]),e("div",Y,[e("span",{onClick:g=>t.removeImage(r),class:"el-icon-close"},null,8,A),e("div",G,[e("img",{src:l&&l.url},null,8,H),e("span",{onClick:g=>t.addImage(r),class:"el-icon-edit-outline"},null,8,J)])])]))]),_:1},8,["modelValue","class"])):k("v-if",!0),a.list.data&&a.list.data.length<t.len?(u(),f(b,{key:1},[i(p,{type:"primary",icon:"el-icon-plus",onClick:c[1]||(c[1]=l=>t.addImage(null)),class:"add-image"},{default:n(()=>[C(" 添加图片 ")]),_:1}),e("p",K,"（建议尺寸："+_(t.size)+"）",1)],64)):k("v-if",!0),i(w,{ref:"upload","http-request":t.upload,"show-file-list":!1,multiple:"",action:"",style:{display:"none"}},null,8,["http-request"]),i(z,{title:"请填写图片跳转链接",visible:a.show,onClose:t.close},{default:n(()=>[i(D,{"label-width":"100px"},{default:n(()=>[i(y,{label:"跳转链接"},{default:n(()=>[i(V,{modelValue:a.url,"onUpdate:modelValue":c[2]||(c[2]=l=>a.url=l)},null,8,["modelValue"])]),_:1}),i(y,{label:""},{default:n(()=>[i(p,{type:"primary",onClick:t.confirm},{default:n(()=>[C("确定")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["visible","onClose"])])],2112)}const $=N(j,[["render",Q],["__scopeId","data-v-6dd638b5"],["__file","Image.vue"]]);export{$ as default};
